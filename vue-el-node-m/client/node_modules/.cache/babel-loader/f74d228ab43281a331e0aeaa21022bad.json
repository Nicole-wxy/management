{"remainingRequest":"C:\\Users\\11219\\Desktop\\vue-el-node-m\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\11219\\Desktop\\vue-el-node-m\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\11219\\Desktop\\vue-el-node-m\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\11219\\Desktop\\vue-el-node-m\\client\\src\\views\\FundList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\11219\\Desktop\\vue-el-node-m\\client\\src\\views\\FundList.vue","mtime":1569989562912},{"path":"C:\\Users\\11219\\Desktop\\vue-el-node-m\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\11219\\Desktop\\vue-el-node-m\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\11219\\Desktop\\vue-el-node-m\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\11219\\Desktop\\vue-el-node-m\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DialogFund from \"../components/DialogFund.vue\";\nexport default {\n  name: \"fundlist\",\n  data: function data() {\n    return {\n      allTableData: [],\n      tableData: [],\n      filterData: [],\n      dialog: {\n        show: false,\n        title: \"\",\n        option: \"edit\"\n      },\n      formData: {\n        type: \"\",\n        describe: \"\",\n        income: \"\",\n        expend: \"\",\n        cash: \"\",\n        remark: \"\",\n        id: \"\"\n      },\n      paginations: {\n        //当前页\n        page_index: 1,\n        //总数\n        total: 0,\n        //一页多少条\n        page_size: 8,\n        //每页多少条\n        page_sizes: [8, 16, 24, 32],\n        //翻页属性\n        layout: \"total, sizes, prev, pager, next, jumper\"\n      },\n      search_data: {\n        startTime: \"\",\n        endTime: \"\"\n      }\n    };\n  },\n  created: function created() {\n    this.getProfiles();\n  },\n  methods: {\n    //获取表格数据\n    getProfiles: function getProfiles() {\n      var _this = this;\n\n      this.$axios.get(\"/api/profiles\").then(function (res) {\n        _this.allTableData = res.data.result.profiles;\n        _this.filterData = res.data.result.profiles; //设置分页\n\n        _this.setPaginations();\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    setPaginations: function setPaginations() {\n      var _this2 = this;\n\n      this.paginations.total = this.allTableData.length;\n      this.paginations.page_index = 1;\n      this.paginations.page_size = 8;\n      this.tableData = this.allTableData.filter(function (item, index) {\n        return index < _this2.paginations.page_size;\n      });\n    },\n    handleEdit: function handleEdit(index, row) {\n      this.dialog = {\n        show: true,\n        title: \"修改资金信息\",\n        option: \"edit\"\n      };\n      this.formData = {\n        type: row.type,\n        describe: row.describe,\n        income: row.income,\n        expend: row.expend,\n        cash: row.cash,\n        remark: row.remark,\n        id: row._id\n      };\n    },\n    handleDelete: function handleDelete(index, row) {\n      var _this3 = this;\n\n      this.$axios.delete(\"/api/profiles/delete/\".concat(row._id)).then(function (res) {\n        _this3.$message({\n          message: \"删除成功!\",\n          type: \"success\"\n        });\n\n        _this3.getProfiles();\n      });\n    },\n    handleAdd: function handleAdd() {\n      this.dialog = {\n        show: true,\n        title: \"添加资金信息\",\n        option: \"add\"\n      };\n      this.formData = {\n        type: \"\",\n        describe: \"\",\n        income: \"\",\n        expend: \"\",\n        cash: \"\",\n        remark: \"\",\n        id: \"\"\n      };\n    },\n    handleSizeChange: function handleSizeChange(page_size) {\n      this.paginations.page_index = 1;\n      this.paginations.page_size = page_size;\n      this.tableData = this.allTableData.filter(function (item, index) {\n        return index < page_size;\n      });\n    },\n    handleCurrentChange: function handleCurrentChange(page) {\n      //获取当前页的数量\n      var index = this.paginations.page_size * (page - 1); //获取总数\n\n      var num = this.paginations.page_size * page; //容器\n\n      var tables = [];\n\n      for (var i = index; i < num; i++) {\n        if (this.allTableData[i]) {\n          tables.push(this.allTableData[i]);\n        }\n\n        this.tableData = tables;\n      }\n    },\n    handleSearch: function handleSearch() {\n      if (!this.search_data.startTime || !this.search_data.endTime) {\n        this.$message({\n          message: \"请选择时间区间\",\n          type: \"warning\"\n        });\n        this.getProfiles();\n        return;\n      }\n\n      var sTime = this.search_data.startTime.getDate();\n      var eTime = this.search_data.endTime.getDate();\n      this.allTableData = this.filterData.filter(function (item) {\n        var date = new Date(item.date);\n        var time = date.getDate();\n        return time >= sTime && time <= eTime;\n      });\n      this.setPaginations();\n    }\n  },\n  components: {\n    DialogFund: DialogFund\n  }\n};",{"version":3,"sources":["FundList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div>\r\n      <el-form :inline=\"true\" ref=\"add_data\" :model=\"search_data\">\r\n        <el-form-item label=\"按时间筛选:\">\r\n          <el-date-picker v-model=\"search_data.startTime\" type=\"date\" placeholder=\"选择开始时间\"></el-date-picker>&nbsp;--\r\n          <el-date-picker v-model=\"search_data.endTime\" type=\"date\" placeholder=\"选择结束时间\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" size=\"small\" icon=\"search\" @click=\"handleSearch()\">筛选</el-button>\r\n        </el-form-item>\r\n        <el-form-item class=\"btnRight\">\r\n          <el-button type=\"primary\" size=\"small\" icon=\"view\" @click=\"handleAdd()\">添加</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <div class=\"table_container\">\r\n      <el-table\r\n        v-if=\"tableData.length>0\"\r\n        :data=\"tableData\"\r\n        max-height=\"515\"\r\n        :default-sort=\"{prop: 'date', order: 'descending'}\"\r\n        border\r\n        style=\"width: 100%\"\r\n      >\r\n        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"70\"></el-table-column>\r\n        <el-table-column prop=\"date\" label=\"创建时间\" align=\"center\" width=\"140\" sortable>\r\n          <template slot-scope=\"scope\">\r\n            <el-icon name=\"time\"></el-icon>\r\n            <span style=\"margin-left: 10px\">{{ scope.row.date.substring(0, 10) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"type\" label=\"收支类型\" align=\"center\" width=\"140\"></el-table-column>\r\n        <el-table-column prop=\"describe\" label=\"收支描述\" align=\"center\" width=\"140\"></el-table-column>\r\n        <el-table-column prop=\"income\" label=\"收入\" align=\"center\" width=\"140\">\r\n          <template slot-scope=\"scope\">\r\n            <span style=\"color:#00d053\">+ {{ scope.row.income }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"expend\" label=\"支出\" align=\"center\" width=\"140\">\r\n          <template slot-scope=\"scope\">\r\n            <span style=\"color:#f56767\">- {{ scope.row.expend }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"cash\" label=\"账户现金\" align=\"center\" width=\"140\">\r\n          <template slot-scope=\"scope\">\r\n            <span style=\"color:#4db3ff\">{{ scope.row.cash }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"remark\" label=\"备注\" align=\"center\" width=\"220\"></el-table-column>\r\n        <el-table-column prop=\"operation\" align=\"center\" label=\"操作\" fixed=\"right\" width=\"180\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"warning\"\r\n              icon=\"edit\"\r\n              size=\"small\"\r\n              @click=\"handleEdit(scope.$index, scope.row)\"\r\n            >编辑</el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"delete\"\r\n              size=\"small\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\"\r\n            >删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <div class=\"pagination-container\">\r\n            <el-pagination\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n              :current-page.sync=\"paginations.page_index\"\r\n              :page-sizes=\"paginations.page_sizes\"\r\n              :page-size=\"paginations.page_size\"\r\n              :layout=\"paginations.layout\"\r\n              :total=\"paginations.total\"\r\n            ></el-pagination>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <DialogFund :dialog=\"dialog\" :formData=\"formData\" @update=\"getProfiles\"></DialogFund>\r\n  </div>\r\n</template>\r\n<script>\r\nimport DialogFund from \"../components/DialogFund.vue\";\r\nexport default {\r\n  name: \"fundlist\",\r\n  data() {\r\n    return {\r\n      allTableData: [],\r\n      tableData: [],\r\n      filterData: [],\r\n      dialog: {\r\n        show: false,\r\n        title: \"\",\r\n        option: \"edit\"\r\n      },\r\n      formData: {\r\n        type: \"\",\r\n        describe: \"\",\r\n        income: \"\",\r\n        expend: \"\",\r\n        cash: \"\",\r\n        remark: \"\",\r\n        id: \"\"\r\n      },\r\n      paginations: {\r\n        //当前页\r\n        page_index: 1,\r\n        //总数\r\n        total: 0,\r\n        //一页多少条\r\n        page_size: 8,\r\n        //每页多少条\r\n        page_sizes: [8, 16, 24, 32],\r\n        //翻页属性\r\n        layout: \"total, sizes, prev, pager, next, jumper\"\r\n      },\r\n      search_data: {\r\n        startTime: \"\",\r\n        endTime: \"\"\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getProfiles();\r\n  },\r\n  methods: {\r\n    //获取表格数据\r\n    getProfiles() {\r\n      this.$axios\r\n        .get(\"/api/profiles\")\r\n        .then(res => {\r\n          this.allTableData = res.data.result.profiles;\r\n          this.filterData = res.data.result.profiles;\r\n          //设置分页\r\n          this.setPaginations();\r\n        })\r\n        .catch(err => console.log(err));\r\n    },\r\n    setPaginations() {\r\n      this.paginations.total = this.allTableData.length;\r\n      this.paginations.page_index = 1;\r\n      this.paginations.page_size = 8;\r\n      this.tableData = this.allTableData.filter((item, index) => {\r\n        return index < this.paginations.page_size;\r\n      });\r\n    },\r\n    handleEdit(index, row) {\r\n      this.dialog = {\r\n        show: true,\r\n        title: \"修改资金信息\",\r\n        option: \"edit\"\r\n      };\r\n      this.formData = {\r\n        type: row.type,\r\n        describe: row.describe,\r\n        income: row.income,\r\n        expend: row.expend,\r\n        cash: row.cash,\r\n        remark: row.remark,\r\n        id: row._id\r\n      };\r\n    },\r\n    handleDelete(index, row) {\r\n      this.$axios.delete(`/api/profiles/delete/${row._id}`).then(res => {\r\n        this.$message({\r\n          message: \"删除成功!\",\r\n          type: \"success\"\r\n        });\r\n        this.getProfiles();\r\n      });\r\n    },\r\n    handleAdd() {\r\n      this.dialog = {\r\n        show: true,\r\n        title: \"添加资金信息\",\r\n        option: \"add\"\r\n      };\r\n      this.formData = {\r\n        type: \"\",\r\n        describe: \"\",\r\n        income: \"\",\r\n        expend: \"\",\r\n        cash: \"\",\r\n        remark: \"\",\r\n        id: \"\"\r\n      };\r\n    },\r\n    handleSizeChange(page_size) {\r\n      this.paginations.page_index = 1;\r\n      this.paginations.page_size = page_size;\r\n      this.tableData = this.allTableData.filter((item, index) => {\r\n        return index < page_size;\r\n      });\r\n    },\r\n    handleCurrentChange(page) {\r\n      //获取当前页的数量\r\n      let index = this.paginations.page_size * (page - 1);\r\n      //获取总数\r\n      let num = this.paginations.page_size * page;\r\n      //容器\r\n      let tables = [];\r\n      for (let i = index; i < num; i++) {\r\n        if (this.allTableData[i]) {\r\n          tables.push(this.allTableData[i]);\r\n        }\r\n        this.tableData = tables;\r\n      }\r\n    },\r\n    handleSearch() {\r\n      if (!this.search_data.startTime || !this.search_data.endTime) {\r\n        this.$message({\r\n          message: \"请选择时间区间\",\r\n          type: \"warning\"\r\n        });\r\n        this.getProfiles();\r\n        return;\r\n      }\r\n      const sTime = this.search_data.startTime.getDate();\r\n      const eTime = this.search_data.endTime.getDate();\r\n      this.allTableData = this.filterData.filter(item => {\r\n        let date = new Date(item.date);\r\n        let time = date.getDate();\r\n        return time >= sTime && time <= eTime;\r\n      });\r\n      this.setPaginations();\r\n    }\r\n  },\r\n  components: {\r\n    DialogFund\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.container {\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 16px;\r\n  box-sizing: border-box;\r\n}\r\n.btnRight {\r\n  float: right;\r\n}\r\n.pagination-container {\r\n  text-align: right;\r\n  padding-top: 20px;\r\n}\r\n</style>"],"sourceRoot":"src/views"}]}